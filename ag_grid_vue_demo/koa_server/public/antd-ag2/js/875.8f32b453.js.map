{"version":3,"file":"js/875.8f32b453.js","mappings":"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AI,UAAY,QAAQ,IAAI,IAAI,EAAE,EACjhJgC,EAAkB,G,iCC6JtB,GACA,eACA,OAEA,SACA,aACA,YAGA,SACA,YACA,UACA,QACA,IAGA,OACA,OACA,iBACA,sDACA,uCAEA,kBACA,aACA,iBACA,iBAEA,gBACA,UACA,yCAEA,aACA,OACA,gCACA,mBAGA,UACA,oBACA,0CAEA,OACA,OACA,+BACA,mBAGA,UACA,0CAEA,UACA,0CAEA,KACA,gBAEA,WACA,eACA,0CAIA,EACA,iBACA,OACA,WACA,EACA,iBAEA,uBAEA,GAEA,SACA,YACA,kBACA,2BAEA,EAGA,YACA,cACA,qBACA,SAEA,mCACA,oCAEA,0BACA,oBACA,0BACA,cACA,kBACA,oBACA,oBACA,YACA,UACA,sBACA,oBACA,kBACA,iBACA,GAEA,EAEA,eACA,+BACA,EAGA,mBAEA,GADA,kBACA,aACA,6CACA,gBACA,WACA,aACA,oBACA,qBACA,0BACA,WACA,GAEA,CACA,MACA,uBACA,qBACA,0BACA,YACA,GAGA,EAGA,yBACA,gBACA,qBACA,qBACA,0BACA,WACA,GAGA,EAGA,oBACA,gBACA,qBACA,qBACA,kBACA,gBACA,gBAEA,0BACA,mBACA,GAGA,EAGA,iBACA,0BACA,MACA,KACA,iBACA,gBAEA,uCACA,gBACA,gBACA,SACA,aACA,SACA,SACA,eACA,WACA,UACA,CAEA,QACA,EAGA,eACA,kCACA,OACA,kBACA,8BACA,2BACA,kBACA,qBACA,qBAEA,kBAEA,IAEA,EAGA,eACA,uBACA,WACA,UACA,gBACA,cACA,8BACA,oBACA,uBAEA,uCACA,IAEA,cACA,wBAEA,EAEA,cACA,uBACA,WACA,UACA,cACA,8BACA,oBACA,uBAEA,uCACA,IAEA,cACA,wBAEA,IC3Y6pB,I,WCOzpBC,GAAY,OACd,EACAzC,EACAwC,GACA,EACA,KACA,WACA,MAIF,EAAeC,EAAiB,O","sources":["webpack://AG/./src/views/pages/base/user-manage/components/AddUser/index.vue?0ebb","webpack://AG/src/views/pages/base/user-manage/components/AddUser/index.vue","webpack://AG/./src/views/pages/base/user-manage/components/AddUser/index.vue?8bc1","webpack://AG/./src/views/pages/base/user-manage/components/AddUser/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BLModal',{staticClass:\"RegisterForm\",attrs:{\"title\":_vm.rowInfo ? '编辑用户' : '新增用户',\"visible\":_vm.visible,\"okButtonProps\":{ htmlType: 'submit' },\"confirmLoading\":_vm.submitLoading,\"width\":\"700px\"},on:{\"cancel\":_vm.handleCancel,\"ok\":_vm.handleSubmit}},[_c('a-form',{staticClass:\"user-layout-login\",attrs:{\"form\":_vm.form,\"label-col\":{ span: 5 },\"wrapper-col\":{ span: 12 }}},[_c('a-form-item',{attrs:{\"label\":\"用户名\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['userName', _vm.validatorRules.userName]),expression:\"['userName', validatorRules.userName]\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入用户名\",\"allowClear\":\"\"}},[_c('a-icon',{style:(_vm.defaultStyle),attrs:{\"slot\":\"prefix\",\"type\":\"user\"},slot:\"prefix\"})],1)],1),_c('a-form-item',{attrs:{\"label\":\"手机号\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['phoneNumber', _vm.validatorRules.phoneNumber]),expression:\"['phoneNumber', validatorRules.phoneNumber]\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入手机号\",\"maxLength\":11,\"allowClear\":\"\"}},[_c('a-icon',{style:(_vm.defaultStyle),attrs:{\"slot\":\"prefix\",\"type\":\"phone\"},slot:\"prefix\"})],1)],1),_c('a-form-item',{attrs:{\"label\":\"邮箱\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['email', _vm.validatorRules.email]),expression:\"['email', validatorRules.email]\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入邮箱\",\"maxLength\":50,\"allowClear\":\"\"}},[_c('a-icon',{style:(_vm.defaultStyle),attrs:{\"slot\":\"prefix\",\"type\":\"mail\"},slot:\"prefix\"})],1)],1),_c('a-form-item',{attrs:{\"label\":\"用户角色\"}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['userRole', _vm.validatorRules.userRole]),expression:\"['userRole', validatorRules.userRole]\"}],attrs:{\"placeholder\":\"请选择用户角色\",\"allowClear\":\"\"}},[_c('a-select-option',{attrs:{\"value\":\"超级管理员\"}},[_vm._v(\" 超级管理员 \")]),_c('a-select-option',{attrs:{\"value\":\"管理员\"}},[_vm._v(\" 管理员 \")]),_c('a-select-option',{attrs:{\"value\":\"普通用户\"}},[_vm._v(\" 普通用户 \")])],1)],1),_c('a-form-item',{attrs:{\"label\":\"用户图片\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['userImg', _vm.validatorRules.userImg]),expression:\"['userImg', validatorRules.userImg]\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入用户图片\",\"allowClear\":\"\"}})],1),_c('a-form-item',{attrs:{\"label\":\"真实姓名\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['realName', _vm.validatorRules.realName]),expression:\"['realName', validatorRules.realName]\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入真实姓名\",\"maxLength\":11,\"allowClear\":\"\"}},[_c('a-icon',{style:(_vm.defaultStyle),attrs:{\"slot\":\"prefix\",\"type\":\"user\"},slot:\"prefix\"})],1)],1),_c('a-form-item',{attrs:{\"label\":\"身份证号\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['idCardNo', _vm.validatorRules.idCardNo]),expression:\"['idCardNo', validatorRules.idCardNo]\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入身份证号\",\"maxLength\":18,\"allowClear\":\"\"}})],1),_c('a-form-item',{attrs:{\"label\":\"性别\"}},[_c('a-radio-group',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['sex', _vm.validatorRules.sex]),expression:\"['sex', validatorRules.sex]\"}]},[_c('a-radio',{attrs:{\"value\":1}},[_vm._v(\" 男 \")]),_c('a-radio',{attrs:{\"value\":0}},[_vm._v(\"女\")])],1)],1),_c('a-form-item',{attrs:{\"label\":\"生日\"}},[_c('a-date-picker',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['birthday']),expression:\"['birthday']\"}],attrs:{\"placeholder\":\"请选择您的生日\"}})],1),_c('a-form-item',{attrs:{\"label\":\"省市区\"}},[_c('BLRegion',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\"pcaRegion\"]),expression:\"[`pcaRegion`]\"}],attrs:{\"regionType\":\"pca\"},on:{\"change\":_vm.pcaRegionChange}})],1),_c('a-form-item',{attrs:{\"label\":\"详细地址\"}},[_c('BLRegionAddress',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\"address\"]),expression:\"[`address`]\"}],style:({ width: '300px' }),attrs:{\"location\":_vm.locationCity,\"max-length\":100},on:{\"mapMoveend\":_vm.mapMoveendChange}})],1),_c('a-form-item',{attrs:{\"label\":\"用户状态\"}},[_c('a-radio-group',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['userState', _vm.validatorRules.userState]),expression:\"['userState', validatorRules.userState]\"}]},[_c('a-radio',{attrs:{\"value\":1}},[_vm._v(\"启用\")]),_c('a-radio',{attrs:{\"value\":0}},[_vm._v(\"禁用\")])],1)],1),_c('a-form-item',{attrs:{\"label\":\"备注\"}},[_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['remark']),expression:\"['remark']\"}],attrs:{\"placeholder\":\"请输入备注\",\"rows\":\"4\",\"maxLength\":120}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: junsong Chen 779217162@qq.com\r\n * @Date: 2024-05-25 13:55:03\r\n * @LastEditTime: 2024-07-08 01:04:38\r\n * @Description: \r\n-->\r\n<template>\r\n  <BLModal\r\n    class=\"RegisterForm\"\r\n    :title=\"rowInfo ? '编辑用户' : '新增用户'\"\r\n    :visible=\"visible\"\r\n    :okButtonProps=\"{ htmlType: 'submit' }\"\r\n    :confirmLoading=\"submitLoading\"\r\n    width=\"700px\"\r\n    @cancel=\"handleCancel\"\r\n    @ok=\"handleSubmit\"\r\n  >\r\n    <a-form\r\n      :form=\"form\"\r\n      :label-col=\"{ span: 5 }\"\r\n      :wrapper-col=\"{ span: 12 }\"\r\n      class=\"user-layout-login\"\r\n    >\r\n      <a-form-item label=\"用户名\">\r\n        <a-input\r\n          v-decorator=\"['userName', validatorRules.userName]\"\r\n          type=\"text\"\r\n          placeholder=\"请输入用户名\"\r\n          allowClear\r\n        >\r\n          <a-icon slot=\"prefix\" type=\"user\" :style=\"defaultStyle\" />\r\n        </a-input>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"手机号\">\r\n        <a-input\r\n          v-decorator=\"['phoneNumber', validatorRules.phoneNumber]\"\r\n          type=\"text\"\r\n          placeholder=\"请输入手机号\"\r\n          :maxLength=\"11\"\r\n          allowClear\r\n        >\r\n          <a-icon slot=\"prefix\" type=\"phone\" :style=\"defaultStyle\" />\r\n        </a-input>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"邮箱\">\r\n        <a-input\r\n          v-decorator=\"['email', validatorRules.email]\"\r\n          type=\"text\"\r\n          placeholder=\"请输入邮箱\"\r\n          :maxLength=\"50\"\r\n          allowClear\r\n        >\r\n          <a-icon slot=\"prefix\" type=\"mail\" :style=\"defaultStyle\" />\r\n        </a-input>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"用户角色\">\r\n        <a-select\r\n          v-decorator=\"['userRole', validatorRules.userRole]\"\r\n          placeholder=\"请选择用户角色\"\r\n          allowClear\r\n        >\r\n          <a-select-option value=\"超级管理员\"> 超级管理员 </a-select-option>\r\n          <a-select-option value=\"管理员\"> 管理员 </a-select-option>\r\n          <a-select-option value=\"普通用户\"> 普通用户 </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"用户图片\">\r\n        <a-input\r\n          v-decorator=\"['userImg', validatorRules.userImg]\"\r\n          type=\"text\"\r\n          placeholder=\"请输入用户图片\"\r\n          allowClear\r\n        >\r\n        </a-input>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"真实姓名\">\r\n        <a-input\r\n          v-decorator=\"['realName', validatorRules.realName]\"\r\n          type=\"text\"\r\n          placeholder=\"请输入真实姓名\"\r\n          :maxLength=\"11\"\r\n          allowClear\r\n        >\r\n          <a-icon slot=\"prefix\" type=\"user\" :style=\"defaultStyle\" />\r\n        </a-input>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"身份证号\">\r\n        <a-input\r\n          v-decorator=\"['idCardNo', validatorRules.idCardNo]\"\r\n          type=\"text\"\r\n          placeholder=\"请输入身份证号\"\r\n          :maxLength=\"18\"\r\n          allowClear\r\n        >\r\n        </a-input>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"性别\">\r\n        <a-radio-group v-decorator=\"['sex', validatorRules.sex]\">\r\n          <a-radio :value=\"1\"> 男 </a-radio>\r\n          <a-radio :value=\"0\">女</a-radio>\r\n        </a-radio-group>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"生日\">\r\n        <a-date-picker\r\n          v-decorator=\"['birthday']\"\r\n          placeholder=\"请选择您的生日\"\r\n        />\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"省市区\">\r\n        <BLRegion\r\n          v-decorator=\"[`pcaRegion`]\"\r\n          regionType=\"pca\"\r\n          @change=\"pcaRegionChange\"\r\n        />\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"详细地址\">\r\n        <BLRegionAddress\r\n          v-decorator=\"[`address`]\"\r\n          :location=\"locationCity\"\r\n          :style=\"{ width: '300px' }\"\r\n          :max-length=\"100\"\r\n          @mapMoveend=\"mapMoveendChange\"\r\n        />\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"用户状态\">\r\n        <a-radio-group v-decorator=\"['userState', validatorRules.userState]\">\r\n          <a-radio :value=\"1\">启用</a-radio>\r\n          <a-radio :value=\"0\">禁用</a-radio>\r\n        </a-radio-group>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"备注\">\r\n        <a-textarea\r\n          placeholder=\"请输入备注\"\r\n          rows=\"4\"\r\n          :maxLength=\"120\"\r\n          v-decorator=\"['remark']\"\r\n        />\r\n      </a-form-item>\r\n    </a-form>\r\n  </BLModal>\r\n</template>\r\n\r\n<script>\r\nimport { isPhoneNumber, isEmail } from \"@/utils/validate.js\";\r\nimport { addUser, editUser } from \"@/api/index.js\";\r\n\r\nexport default {\r\n  name: \"AddUser\",\r\n  props: {\r\n    // 弹窗显示隐藏\r\n    visible: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    // 行数据\r\n    rowInfo: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      submitLoading: false,\r\n      form: this.$form.createForm(this, { name: \"AddUserForm\" }),\r\n      defaultStyle: { color: \"rgba(0,0,0,.25)\" },\r\n\r\n      locationCity: \"深圳\",\r\n      locationObj: {\r\n        longitude: undefined,\r\n        latitude: undefined,\r\n      },\r\n      validatorRules: {\r\n        userName: {\r\n          rules: [{ required: true, message: \"请输入用户名!\" }],\r\n        },\r\n        phoneNumber: {\r\n          rules: [\r\n            { required: true, message: \"请输入手机号!\" },\r\n            { validator: isPhoneNumber },\r\n          ],\r\n        },\r\n        userRole: {\r\n          initialValue: \"普通用户\",\r\n          rules: [{ required: true, message: \"请选择用户角色!\" }],\r\n        },\r\n        email: {\r\n          rules: [\r\n            { required: true, message: \"请输入邮箱!\" },\r\n            { validator: isEmail },\r\n          ],\r\n        },\r\n        realName: {\r\n          rules: [{ required: false, message: \"请输入真实姓名!\" }],\r\n        },\r\n        idCardNo: {\r\n          rules: [{ required: false, message: \"请输入身份证号!\" }],\r\n        },\r\n        sex: {\r\n          initialValue: 0,\r\n        },\r\n        userState: {\r\n          initialValue: 1,\r\n          rules: [{ required: true, message: \"请选择用户状态\" }],\r\n        },\r\n      },\r\n    };\r\n  },\r\n  beforeCreate() {},\r\n  watch: {\r\n    visible(newVal) {\r\n      if (newVal) {\r\n        this.initModel();\r\n      } else {\r\n        this.form.resetFields();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    initModel() {\r\n      if (this.rowInfo?.id) {\r\n        this.echoForm(this.rowInfo);\r\n      }\r\n    },\r\n\r\n    // 回显表单\r\n    echoForm(rowInfo) {\r\n      console.log(\"回显表单\");\r\n      this.$nextTick(() => {\r\n        let pcaRegion = [];\r\n\r\n        if (rowInfo.provinceId && rowInfo.cityId && rowInfo.areaId) {\r\n          pcaRegion = [rowInfo.provinceId, rowInfo.cityId, rowInfo.areaId];\r\n        }\r\n        this.form.setFieldsValue({\r\n          userName: rowInfo.userName,\r\n          phoneNumber: rowInfo.phoneNumber,\r\n          email: rowInfo.email,\r\n          userImg: rowInfo.userImg,\r\n          realName: rowInfo.realName,\r\n          idCardNo: rowInfo.idCardNo,\r\n          pcaRegion,\r\n          sex: rowInfo.sex,\r\n          userState: rowInfo.userState,\r\n          birthday: rowInfo.birthday,\r\n          address: rowInfo.address,\r\n          remark: rowInfo.remark,\r\n        });\r\n      });\r\n    },\r\n\r\n    handleCancel() {\r\n      this.$emit(\"update:visible\", false);\r\n    },\r\n\r\n    // 选择地址更改\r\n    pcaRegionChange(ele) {\r\n      console.log(\"选择地址更改\", ele);\r\n      if (ele && ele.length) {\r\n        const startLocation = this.$region.getRegionCode(ele, \"name\");\r\n        if (startLocation && startLocation.length) {\r\n          const [city] = startLocation;\r\n          const address = startLocation.join(\"\");\r\n          this.locationCity = city;\r\n          this.$nextTick(() => {\r\n            this.form.setFieldsValue({\r\n              address,\r\n            });\r\n          });\r\n        }\r\n      } else {\r\n        this.locationCity = \"深圳\";\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue({\r\n            address: \"\",\r\n          });\r\n        });\r\n      }\r\n    },\r\n\r\n    // 地址更改\r\n    dKRegionAddressChange(ele) {\r\n      console.log(\"地址更改\", ele);\r\n      if (typeof ele === \"string\") {\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue({\r\n            address: ele,\r\n          });\r\n        });\r\n      }\r\n    },\r\n\r\n    // 地址更改\r\n    mapMoveendChange(ele) {\r\n      console.log(\"地址更改\", ele);\r\n      if (typeof ele === \"string\") {\r\n        this.$nextTick(() => {\r\n          this.locationObj = {\r\n            longitude: ele.lng,\r\n            latitude: ele.lat,\r\n          };\r\n          this.form.setFieldsValue({\r\n            address: ele.keyword,\r\n          });\r\n        });\r\n      }\r\n    },\r\n\r\n    // 获取提交表单数据\r\n    getSubmitData(values) {\r\n      const { pcaRegion, ...restObj } = values;\r\n      const data = {\r\n        ...restObj,\r\n        ...this.locationObj,\r\n        registerFrom: 2,\r\n      };\r\n      const startLocation = this.$region.getRegionCode(pcaRegion, \"name\");\r\n      if (startLocation && startLocation.length) {\r\n        const [province, city, area] = startLocation;\r\n        const [provinceId, cityId, areaId] = pcaRegion;\r\n        data.province = province;\r\n        data.city = city;\r\n        data.area = area;\r\n        data.provinceId = provinceId;\r\n        data.cityId = cityId;\r\n        data.areaId = areaId;\r\n      }\r\n\r\n      return data;\r\n    },\r\n\r\n    // 提交表单\r\n    handleSubmit() {\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          console.log(\"校验表单成功\", values);\r\n          const submitData = this.getSubmitData(values);\r\n          console.log(\"submitData====>\", submitData);\r\n          if (this.rowInfo?.id) {\r\n            submitData.id = this.rowInfo.id;\r\n            this.editUserFun(submitData);\r\n          } else {\r\n            this.addUserFun(submitData);\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 编辑用户\r\n    editUserFun(data) {\r\n      this.submitLoading = true;\r\n      editUser(data)\r\n        .then((res) => {\r\n          console.log(\"新增用户\", res);\r\n          if (res.code === 200) {\r\n            this.$message.success(\"编辑成功\");\r\n            this.handleCancel();\r\n            this.$emit(\"success\");\r\n          } else {\r\n            this.$message.error(res?.message || \"编辑失败\");\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.submitLoading = false;\r\n        });\r\n    },\r\n    // 新增用户\r\n    addUserFun(data) {\r\n      this.submitLoading = true;\r\n      addUser(data)\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            this.$message.success(\"新增成功\");\r\n            this.handleCancel();\r\n            this.$emit(\"success\");\r\n          } else {\r\n            this.$message.error(res?.message || \"新增失败\");\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.submitLoading = false;\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../../../../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.91.0/node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/.pnpm/babel-loader@8.3.0_@babel+core@7.12.16_webpack@5.91.0/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.4.31_css-loader@6.11.0_webpack@5.91.0__lodash@4.17.21__ppwlbeml3t3pbtwqrqs37ltiwu/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../node_modules/.pnpm/source-map-loader@5.0.0_webpack@5.91.0/node_modules/source-map-loader/dist/cjs.js!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.91.0/node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/.pnpm/babel-loader@8.3.0_@babel+core@7.12.16_webpack@5.91.0/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.4.31_css-loader@6.11.0_webpack@5.91.0__lodash@4.17.21__ppwlbeml3t3pbtwqrqs37ltiwu/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../node_modules/.pnpm/source-map-loader@5.0.0_webpack@5.91.0/node_modules/source-map-loader/dist/cjs.js!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5c626106&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.4.31_css-loader@6.11.0_webpack@5.91.0__lodash@4.17.21__ppwlbeml3t3pbtwqrqs37ltiwu/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c626106\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","rowInfo","visible","htmlType","submitLoading","on","handleCancel","handleSubmit","form","span","directives","name","rawName","value","validatorRules","userName","expression","style","slot","phoneNumber","email","userRole","_v","userImg","realName","idCardNo","sex","pcaRegionChange","width","locationCity","mapMoveendChange","userState","staticRenderFns","component"],"sourceRoot":""}
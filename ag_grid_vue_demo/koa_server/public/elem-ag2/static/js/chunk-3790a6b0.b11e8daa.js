(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["chunk-3790a6b0"],{ae1e:function(e,t,o){},d23b:function(e,t,o){"use strict";o("ae1e")},ed85:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-login--form"},[t("el-card",{attrs:{shadow:"never"}},[t("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.loginForm,size:"default"}},[t("el-form-item",{attrs:{prop:"userName"}},[t("el-input",{attrs:{type:"text",placeholder:"请输入用户名",name:"username",clearable:"","auto-complete":"on"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}},[t("SvgIcon",{attrs:{slot:"prepend",name:"admin"},slot:"prepend"})],1)],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码",name:"password","auto-complete":"new-password","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[t("SvgIcon",{attrs:{slot:"prepend",name:"key"},slot:"prepend"})],1)],1),t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{attrs:{type:"text",placeholder:"验证码"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[t("SvgIcon",{attrs:{slot:"prepend",name:"verify"},slot:"prepend"}),t("template",{slot:"append"},[t("div",{staticClass:"login-code"},[t("ValidateCode",{on:{getValidateCode:function(t){e.validateCode=t}}})],1)])],2)],1),t("MyButton",{staticClass:"button-login",attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v(" "+e._s(e.submitBtnText)+" ")])],1)],1)],1)},s=[],a=(o("cdf1"),o("6eef")),n=o("3042"),i=o("8c1b");let l;const d=(e,t,o)=>{i["a"].validateFun(t,l).then(e=>e?o():o("图形验证码不正确"))};var u={name:"LoginForm",props:{formType:{type:String,default:"loginForm"},safetyVerifyFun:{type:[Function,String],default:""}},data(){return{loading:!1,validateCode:"",loginForm:{userName:"faker123",password:"123456",code:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:16,message:"长度在 2 到 16 个字符",trigger:"blur"},{validator:n["b"],trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入图形验证码",trigger:"blur"},{validator:d,trigger:"blur"}]},isRememberPassword:!1}},computed:{submitBtnText(){return this.safetyVerifyFun?"确定":"登录"}},watch:{validateCode:function(e){l=e,this.loginForm.code=e}},methods:{...Object(a["b"])("user/userInfo",["login"]),submit(){const e=this.safetyVerifyFun&&"function"===typeof this.safetyVerifyFun;e?this.safetyVerifyFun(()=>!0):this.validateLoginForm()},validateLoginForm(){this.$refs.loginForm.validate(e=>{if(e){const{userName:e,password:t}=this.loginForm,o=this;this.loading=!0,this.login({userName:e,password:t}).then(e=>{null!==e&&void 0!==e&&e.token&&null!==e&&void 0!==e&&e.userInfo?o.$router.push({path:o.$route.query.redirect||"/index"}):this.loading=!1}).finally(()=>{this.loading=!1})}})}}},p=u,m=(o("d23b"),o("d4a3")),c=Object(m["a"])(p,r,s,!1,null,"46a66819",null);t["default"]=c.exports}}]);
import{_ as M,K as D,L as A,M as B,N as O,O as S,P as y,v as H,a as N,b as j,r as E,c as f,d as h,w as r,x as F,Q as z,i,f as c,F as x,G as R,s as G,C as m,D as K,l as P,t as L,H as Q,j as q,R as I}from"./index-DjauntYY.js";const J={name:"TagViews",components:{DArrowLeft:D,DArrowRight:A,Operation:B,Minus:O,Close:S,Refresh:y},setup(){const p=F(),o=H(),d=z("reload"),t=N([{icon:"Refresh",title:"刷新",value:"refresh"},{icon:"Close",title:"关闭当前标签页",value:"close"},{icon:"DArrowLeft",title:"关闭左侧标签页",value:"left"},{icon:"DArrowRight",title:"关闭右侧标签页",value:"right"},{icon:"Operation",title:"关闭其他标签页",value:"other"},{icon:"Minus",title:"关闭全部标签页",value:"all"}]);j(()=>{console.log("mounted-----渲染次数")});const b=a=>{p.push({path:a||"/index"})},v=(a,s)=>{const n=o.tagViewsList,e=n.findIndex(_=>_.name===a),l=()=>{d&&d()},w=_=>{_!=="/index"?(n.splice(e,1),_===o.currentRoute&&(o.currentRoute=e===0?"index":n[e-1].path)):G("首页标签不能被清除")},V=()=>{n.splice(1,e)},k=()=>{n.splice(e+1,n.length)},T=()=>{o.tagViewsList=[n[e]]};switch(s){case"refresh":console.log("刷新"),l();break;case"close":console.log("关闭当前标签页"),w(a);break;case"left":console.log("关闭左侧标签页"),V();break;case"right":console.log("关闭右侧标签页"),k();break;case"other":console.log("关闭其他标签页"),T();break;case"all":console.log("关闭全部标签页");break}},g=(a,s)=>{if(["left","right"].includes(s)){const n=o.tagViewsList.findIndex(e=>a===e.name);return s==="left"?n!==0:n!==o.tagViewsList.length-1}else return s==="other"?o.tagViewsList.length>1:s==="all"?o.tagViewsList.length!==0:!0},u=E(null);return{store:o,tabsHandleChange:b,handleTabRemove:v,isShowMenu:g,handleChange:(a,s)=>{a&&u.value.forEach(n=>{n.id!==s&&n.handleClose()})},dropdownRef:u,contextmenuList:t,reload:d}}},U={class:"TagViews"};function W(p,o,d,t,b,v){const g=i("el-icon"),u=i("el-dropdown-item"),C=i("el-dropdown-menu"),a=i("el-dropdown"),s=i("el-tab-pane"),n=i("el-tabs");return c(),f("div",U,[h(n,{"model-value":t.store.currentRoute,type:"card",class:"TagViews-tabs",closable:"",onTabChange:t.tabsHandleChange,onTabRemove:o[0]||(o[0]=e=>t.handleTabRemove(e,"close"))},{default:r(()=>[(c(!0),f(x,null,R(t.store.tagViewsList,e=>(c(),m(s,{key:e.name,label:e.title,name:e.name,closable:""},{label:r(()=>[h(a,{id:e.name,ref_for:!0,ref:"dropdownRef",trigger:"contextmenu",onVisibleChange:l=>t.handleChange(l,e.name)},{dropdown:r(()=>[h(C,null,{default:r(()=>[(c(!0),f(x,null,R(t.contextmenuList,(l,w)=>(c(),f("span",{key:w},[t.isShowMenu(e.name,l.value)?(c(),m(u,{key:0,onClick:V=>t.handleTabRemove(e.name,l.value)},{default:r(()=>[h(g,null,{default:r(()=>[(c(),m(K(l.icon)))]),_:2},1024),P(" "+L(l.title),1)]),_:2},1032,["onClick"])):Q("",!0)]))),128))]),_:2},1024)]),default:r(()=>[q("span",{class:I(t.store.currentRoute===e.name?"TagViews-label":"")},L(e.title),3)]),_:2},1032,["id","onVisibleChange"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["model-value","onTabChange"])])}const Y=M(J,[["render",W],["__scopeId","data-v-6637b371"]]);export{Y as default};

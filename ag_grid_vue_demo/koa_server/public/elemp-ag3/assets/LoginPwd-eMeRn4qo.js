import{_ as V,S as x,T as k,r as a,U as L,V as P,c as y,d as s,w as r,W as R,x as h,i as t,f as U,X as D,j as i,l as F,p as N,k as I}from"./index-DjauntYY.js";const S={name:"LoginPwd",components:{MyDialog:x},setup(){const n=k(),o=a(!1),g=a(!1),e=a(null),f=a(!1),m=a({userName:"faker123",password:"123456"}),d=a({userName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:5,max:15,message:"账号名称长度应该在5·15之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:4,max:15,message:"密码长度应该在5·15之间",trigger:"blur"}]}),c=R(),u=h();return{ruleFormRef:e,ruleForm:m,rules:d,User:L,Lock:P,submitLoading:o,rememberPwd:f,openRegisterDialog:g,submitForm:async()=>{console.log("提交表单"),e.value&&(console.log("ruleFormRef",e.value),await e.value.validate((p,l)=>{p?(console.log("submit!",m.value),o.value=!0,n.login(m.value).then(v=>{console.log("resuserUserInfo=====>",v),v&&u.push({path:c.query.redirect||"/index"})}).finally(()=>{o.value=!1})):console.log("error submit!",l)}))},openRegisterDialogFun:()=>{g.value=!0}}}},_=n=>(N("data-v-f0071af7"),n=n(),I(),n),C={class:"LoginPwd"},B={class:"LoginPwd-forgetPwd"},q=_(()=>i("div",{class:"dk-text-btn"},"忘记密码？",-1)),z=_(()=>i("div",{class:"LoginPwd-extra__line"},"——",-1)),K=_(()=>i("div",{class:"dk-text-btn"},"快速注册",-1)),M=_(()=>i("div",{class:"LoginPwd-extra__line"},"——",-1)),T=[z,K,M];function j(n,o,g,e,f,m){const d=t("el-button"),c=t("el-input"),u=t("el-form-item"),w=t("el-checkbox"),b=t("el-form"),p=t("MyDialog");return U(),y("div",C,[s(b,{ref:"ruleFormRef",model:e.ruleForm,rules:e.rules,class:"LoginPwd-ruleForm",size:n.$commJs.formSize,"status-icon":""},{default:r(()=>[s(u,{prop:"userName"},{default:r(()=>[s(c,{modelValue:e.ruleForm.userName,"onUpdate:modelValue":o[0]||(o[0]=l=>e.ruleForm.userName=l),placeholder:"请输入邮箱/账号/手机号",clearable:""},{prepend:r(()=>[s(d,{icon:e.User},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),s(u,{prop:"password"},{default:r(()=>[s(c,{modelValue:e.ruleForm.password,"onUpdate:modelValue":o[1]||(o[1]=l=>e.ruleForm.password=l),"show-password":"",placeholder:"请输入密码",clearable:"",onKeyup:D(e.submitForm,["enter","up"])},{prepend:r(()=>[s(d,{icon:e.Lock},null,8,["icon"])]),_:1},8,["modelValue","onKeyup"])]),_:1}),s(u,null,{default:r(()=>[i("div",B,[q,s(w,{modelValue:e.rememberPwd,"onUpdate:modelValue":o[2]||(o[2]=l=>e.rememberPwd=l)},{default:r(()=>[F("记住密码")]),_:1},8,["modelValue"])]),s(d,{class:"LoginPwd-submitBtn",type:"primary",loading:e.submitLoading,onClick:e.submitForm},{default:r(()=>[F(" 登录 ")]),_:1},8,["loading","onClick"]),i("div",{class:"LoginPwd-extra",onClick:o[3]||(o[3]=l=>e.openRegisterDialogFun())},T)]),_:1})]),_:1},8,["model","rules","size"]),s(p,{modelValue:e.openRegisterDialog,"onUpdate:modelValue":o[4]||(o[4]=l=>e.openRegisterDialog=l)},null,8,["modelValue"])])}const J=V(S,[["render",j],["__scopeId","data-v-f0071af7"]]);export{J as default};
